(()=>{var r={n:o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return r.d(a,{a}),a},d:(o,a)=>{for(var n in a)r.o(a,n)&&!r.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:a[n]})},o:(r,o)=>Object.prototype.hasOwnProperty.call(r,o),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},o={};(()=>{"use strict";function a(){return a=Object.assign?Object.assign.bind():function(r){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])}return r},a.apply(this,arguments)}r.r(o);const n=flarum.core.compat["common/extend"],l=flarum.core.compat["forum/components/DiscussionListItem"];var e=r.n(l);const i=flarum.core.compat["utils/string"],s=flarum.core.compat["common/helpers/textContrastClass"];var t=r.n(s);const u=flarum.core.compat["common/utils/classList"];var c=r.n(u);const d=flarum.core.compat["common/components/Link"];var g=r.n(d);const C=flarum.core.compat["common/helpers/highlight"];var B=r.n(C);const y=flarum.core.compat["common/helpers/listItems"];var h=r.n(y);function k(r,o){var a="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(a)return(a=a.call(r)).next.bind(a);if(Array.isArray(r)||(a=function(r,o){if(r){if("string"==typeof r)return p(r,o);var a=Object.prototype.toString.call(r).slice(8,-1);return"Object"===a&&r.constructor&&(a=r.constructor.name),"Map"===a||"Set"===a?Array.from(r):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(r,o):void 0}}(r))||o&&r&&"number"==typeof r.length){a&&(r=a);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(r,o){(null==o||o>r.length)&&(o=r.length);for(var a=0,n=new Array(o);a<o;a++)n[a]=r[a];return n}var f,T,F,b,q,R={Automatic:null,White:"text-contrast--light",WhiteWithBorder:"outlinetextblackborder",Black:"text-contrast--dark",BlackWithBorder:"outlinetextwhiteborder"},S={StickyNote:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"folded",secondaryFontClass:null},StickyNoteTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"folded",secondaryFontClass:null},StickyNoteTab:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"folded",secondaryFontClass:null},StickyNoteBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"folded",secondaryFontClass:null},StickyNoteOutline:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"transparent",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"folded",secondaryFontClass:null},StickyNoteOutlineTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"folded",secondaryFontClass:null},StickyNoteOutlineTab:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"folded",secondaryFontClass:null},StickyNoteOutlineBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"folded",secondaryFontClass:null},Basic:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"circle",secondaryFontClass:null},BasicTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"circle",secondaryFontClass:null},BasicTab:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"circle",secondaryFontClass:null},BasicBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"circle",secondaryFontClass:null},BasicOutline:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"transparent",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"circle",secondaryFontClass:null},BasicOutlineTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"circle",secondaryFontClass:null},BasicOutlineTab:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"circle",secondaryFontClass:null},BasicOutlineBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"circle",secondaryFontClass:null},Flat:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"square",secondaryFontClass:null},FlatTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"square",secondaryFontClass:null},FlatTab:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"square",secondaryFontClass:null},FlatBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"square",secondaryFontClass:null},FlatBorder:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"transparent",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"square",secondaryFontClass:null},FlatBorderTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"square",secondaryFontClass:null},FlatBorderTab:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"square",secondaryFontClass:null},FlatBorderBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",primaryFontClass:null,isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",childFontClass:null,isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc",unreadCSS:"square",secondaryFontClass:null}};app.initializers.add("yippy-tag-with-themes",(function(){(0,n.extend)(e().prototype,"view",(function(r){var o=r.children.find((function(r){return r&&"div"===r.tag&&r.attrs&&r.attrs.className.includes("DiscussionListItem-content")}));if(o.children[0]=m("div",{className:"DiscussionListItem-author-container"},[o.children[0],o.children[1]]),delete o.children[1],o.children[3]=m("div",{className:"DiscussionListItem-stats"},o.children[3]),F){null==b&&(b=F);var n=T.isPrimaryTagBackgroundColorRequired?F.color():T.primaryBackgroundColor;if(T.isPrimaryTagAnButton){var l="DiscussionListItem-footer";switch(f){case"StickyNoteTab":case"StickyNoteOutlineTab":case"BasicTab":case"BasicOutlineTab":case"FlatTab":case"FlatBorderTab":l="DiscussionListItem--tabfooter"}o.children.push(m("span",{class:l},m("span",{class:"PrimaryTagLabel",style:"background:"+n},m("span",{class:c()("PrimaryTagLabel-text",T.primaryFontClass?T.primaryFontClass:t()(n))},m("i",{class:"PrimaryTagLabel-icon "+F.data.attributes.icon+" fa-1x"}),m("span",{class:"PrimaryTagLabel-name"},F.data.attributes.name))),q))}else o.children.push(m("span",{class:c()("DiscussionListItem-footer",T.primaryFontClass?T.primaryFontClass:t()(n)),style:"background:"+n},m("span",{class:"DiscussionListItem--primary"},m("i",{"aria-hidden":"true",class:"TagLabel-icon "+F.data.attributes.icon+" fa-1x"}),F.data.attributes.name),q))}var e=T.outlineBackgroundColor;switch(b&&(e=b.color()),f){case"StickyNoteTab":case"BasicTab":b&&o.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -15px -15px 0px 0px "+e}));break;case"StickyNoteOutline":case"StickyNoteOutlineTag":case"StickyNoteOutlineBanner":case"BasicOutline":case"BasicOutlineTag":case"BasicOutlineBanner":o.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -6px -6px 0px 0px "+e+"; height: 100%; bottom: 0;"}));break;case"FlatBorder":case"FlatBorderTag":case"FlatBorderBanner":o.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset 0 0 0 4px "+e+"; height: 100%; bottom: 0;"}));break;case"StickyNoteOutlineTab":case"BasicOutlineTab":b?o.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -6px -6px 0px 0px "+e+";height: calc(100% - 18px); bottom: 18px;"})):o.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -6px -6px 0px 0px "+e+"; height: 100%; bottom: 0;"}));break;case"FlatBorderTab":b?o.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset 0 0 0 4px "+e+";height: calc(100% - 18px); bottom: 22px;"})):o.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset 0 0 0 4px "+e+"; height: 100%; bottom: 0;"}))}var i=T.unreadCSS;r.attrs.style=a(b?{background:T.isChildTagBackgroundColorRequired?b.color():T.childBackgroundColor}:{background:T.childBackgroundColor},r.attrs.style||{}),this.attrs.discussion.isUnread()&&o.children.push(m("span",{class:"DiscussionListItem--unreadoutline"+i,style:"background:"+T.unreadColor+"; color:"+T.unreadColor})),"folded"==i&&(b?(r.attrs.style=a({background:T.isChildTagBackgroundColorRequired?b.color():T.childBackgroundColor},r.attrs.style||{}),o.children.push(m("span",{class:"DiscussionListItem--read"+i,style:"border-color:"+(T.isOutlineTagBackgroundColorRequired?b.color():T.outlineBackgroundColor)}))):o.children.push(m("span",{class:"DiscussionListItem--read"+i,style:"border-color:"+T.outlineBackgroundColor}))),r.attrs.className+=" "+f})),(0,n.override)(e().prototype,"mainView",(function(){!function(r,o){f=T=F=b=null,q={tag:"span",attrs:{class:"DiscussionListItem--secondary",style:{}},children:[]},f=o.forum.attribute("yippy-tag-with-themes.designDefault");var a=o.forum.attribute("yippy-tag-with-themes.designByTags"),n=null;if(r&&r.length>0)for(var l,e=k(r);!(l=e()).done;){var i=l.value;i.data.attributes.isChild?b=i:null==i.data.attributes.position||(F=i)}if(F)for(var s,u=k(a);!(s=u()).done;){var d=s.value;if(d.isEnabled&&d.tags.includes(F.id())){f=d.themeName,n={primaryBackgroundColor:d.primaryBackgroundColor,primaryFontClass:R[d.primaryFontClass],childBackgroundColor:d.childBackgroundColor,childFontClass:R[d.childFontClass],outlineBackgroundColor:d.outlineBackgroundColor,unreadColor:d.unreadColor,secondaryFontClass:R[d.secondaryFontClass]};break}}if(T=S[f],n&&(T=Object.assign({},T,n)),r&&r.length>0)for(var g,C=k(r);!(g=C()).done;){var B=g.value;null==B.data.attributes.position&&q.children.push(m("span",{class:"TagLabel",style:"--tag-bg:"+B.color()},m("span",{class:c()("TagLabel-text",T.secondaryFontClass?T.secondaryFontClass:t()(B.color()))},m("i",{class:"TagLabel-icon "+B.data.attributes.icon}),m("span",{class:"TagLabel-name"},B.data.attributes.name))))}}(this.attrs.discussion.tags(),app);var r=this.attrs.discussion,o=this.getJumpTo(),a=t()(T.childBackgroundColor);return T.isChildTagBackgroundColorRequired&&(b?a=T.childFontClass?T.childFontClass:t()(b.color()):F&&(a=T.childFontClass?T.childFontClass:t()(F.color()))),m(g(),{href:app.route.discussion(r,o),className:"DiscussionListItem-main"},m("h2",{className:c()("DiscussionListItem-title-edit",a)},B()(r.title(),this.highlightRegExp)),m("ul",{className:c()("DiscussionListItem-info-edit",a)},h()(this.infoItems().toArray())))})),(0,n.extend)(e().prototype,"infoItems",(function(r){var o=null;if(this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>1)for(var a,n=k(this.attrs.discussion.tags());!(a=n()).done;){var l=a.value;if(l.data.attributes.isChild){o=l;break}}if(!r.has("excerpt")){var e=this.attrs.discussion.firstPost();if(e){var s=(0,i.truncate)(e.contentPlain(),175);r.add("excerpt",m("div",null,s),-100)}}r.has("tags")&&r.remove("tags"),o?r.add("tag",m("span",{class:"TagLabel-inner"},m("center",null,m("i",{"aria-hidden":"true",class:"TagLabel-icon "+o.data.attributes.icon+" fa-1x"}),o.data.attributes.name)),-100):r.add("tag",m("span",{class:"TagLabel-inner"}),-100)}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map