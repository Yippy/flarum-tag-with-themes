(()=>{var r={n:a=>{var o=a&&a.__esModule?()=>a.default:()=>a;return r.d(o,{a:o}),o},d:(a,o)=>{for(var t in o)r.o(o,t)&&!r.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:o[t]})},o:(r,a)=>Object.prototype.hasOwnProperty.call(r,a),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},a={};(()=>{"use strict";function o(){return o=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},o.apply(this,arguments)}r.r(a);const t=flarum.core.compat["common/extend"],e=flarum.core.compat["forum/components/DiscussionListItem"];var i=r.n(e);const s=flarum.core.compat["utils/string"],n=flarum.core.compat["common/helpers/textContrastClass"];var l=r.n(n);const c=flarum.core.compat["common/utils/classList"];var u=r.n(c);const d=flarum.core.compat["common/components/Link"];var g=r.n(d);const p=flarum.core.compat["common/helpers/highlight"];var h=r.n(p);const y=flarum.core.compat["common/helpers/listItems"];var f=r.n(y);function C(r,a){var o="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(o)return(o=o.call(r)).next.bind(o);if(Array.isArray(r)||(o=function(r,a){if(r){if("string"==typeof r)return k(r,a);var o=Object.prototype.toString.call(r).slice(8,-1);return"Object"===o&&r.constructor&&(o=r.constructor.name),"Map"===o||"Set"===o?Array.from(r):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?k(r,a):void 0}}(r))||a&&r&&"number"==typeof r.length){o&&(r=o);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(r,a){(null==a||a>r.length)&&(a=r.length);for(var o=0,t=new Array(a);o<a;o++)t[o]=r[o];return t}var b={StickyNote:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteTab:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!0,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!1,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteOutline:{isPrimaryTagBackgroundColorRequired:!1,isPrimaryTagAnButton:!1,primaryBackgroundColor:"transparent",isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteOutlineTag:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteOutlineTab:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!0,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"},StickyNoteOutlineBanner:{isPrimaryTagBackgroundColorRequired:!0,isPrimaryTagAnButton:!1,primaryBackgroundColor:"#e8ecf3",isChildTagBackgroundColorRequired:!1,childBackgroundColor:"#e8ecf3",isOutlineTagBackgroundColorRequired:!0,outlineBackgroundColor:"#595a58",unreadColor:"#2199fc"}};app.initializers.add("yippy-tag-with-themes",(function(){(0,t.extend)(i().prototype,"view",(function(r){var a=r.children.find((function(r){return r&&"div"===r.tag&&r.attrs&&r.attrs.className.includes("DiscussionListItem-content")})),t=app.forum.attribute("yippy-tag-with-themes.designDefault"),e=b[t];a.children[0]=m("div",{className:"DiscussionListItem-author-container"},[a.children[0],a.children[1]]),delete a.children[1],a.children[3]=m("div",{className:"DiscussionListItem-stats"},a.children[3]);var i=null,s=null;if(this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>0){for(var n,c={tag:"span",attrs:{class:"DiscussionListItem--secondary",style:{}},children:[]},d=C(this.attrs.discussion.tags());!(n=d()).done;){var g=n.value;g.data.attributes.isChild?i=g:null==g.data.attributes.position?c.children.push(m("span",{class:"TagLabel",style:"--tag-bg:"+g.color()},m("span",{class:u()("TagLabel-text",l()(g.color()))},m("i",{class:"TagLabel-icon "+g.data.attributes.icon}),m("span",{class:"TagLabel-name"},g.data.attributes.name)))):s=g}if(s){null==i&&(i=s);var p=e.isPrimaryTagBackgroundColorRequired?s.color():e.primaryBackgroundColor;e.isPrimaryTagAnButton?a.children.push(m("span",{class:"StickyNoteOutlineTab"==t||"StickyNoteTab"==t?"DiscussionListItem--filingfooter":"DiscussionListItem-footer"},m("span",{class:"PrimaryTagLabel",style:"background:"+s.color()},m("span",{class:u()("PrimaryTagLabel-text",l()(s.color()))},m("i",{class:"PrimaryTagLabel-icon "+s.data.attributes.icon+" fa-1x"}),m("span",{class:"PrimaryTagLabel-name"},s.data.attributes.name))),c)):a.children.push(m("span",{class:u()("DiscussionListItem-footer",l()(p)),style:"background:"+p},m("span",{class:"DiscussionListItem--primary"},m("i",{"aria-hidden":"true",class:"TagLabel-icon "+s.data.attributes.icon+" fa-1x"}),s.data.attributes.name),c))}}var h=e.outlineBackgroundColor;switch(i&&(h=i.color()),t){case"StickyNoteTab":i&&a.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -15px -15px 0px 0px "+h}));break;case"StickyNoteOutline":case"StickyNoteOutlineTag":case"StickyNoteOutlineBanner":a.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -6px -6px 0px 0px "+h+"; height: 100%; bottom: 0;"}));break;case"StickyNoteOutlineTab":if(i){a.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -6px -6px 0px 0px "+h+";height: calc(100% - 25px); bottom: 18px;"}));break}a.children.push(m("span",{class:"DiscussionListItem--outline",style:"box-shadow:inset -6px -6px 0px 0px "+h+"; height: 100%; bottom: 0;"}))}i?(r.attrs.style=o({background:e.isChildTagBackgroundColorRequired?i.color():e.childBackgroundColor},r.attrs.style||{}),a.children.push(m("span",{class:" DiscussionListItem--read",style:"border-color:"+(e.isOutlineTagBackgroundColorRequired?i.color():e.outlineBackgroundColor)}))):(r.attrs.style=o({background:e.childBackgroundColor},r.attrs.style||{}),a.children.push(m("span",{class:" DiscussionListItem--read",style:"border-color:"+e.outlineBackgroundColor}))),this.attrs.discussion.isUnread()&&a.children.push(m("span",{class:" DiscussionListItem--unread",style:"border-color:"+e.unreadColor})),r.attrs.className+=" "+t})),(0,t.override)(i().prototype,"mainView",(function(){var r=this.attrs.discussion,a=this.getJumpTo(),o=app.forum.attribute("yippy-tag-with-themes.designDefault"),t=b[o],e=l()(t.childBackgroundColor);if(t.isChildTagBackgroundColorRequired&&this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>0){for(var i,s=null,n=null,c=C(this.attrs.discussion.tags());!(i=c()).done;){var d=i.value;d.data.attributes.isChild?s=d:d.data.attributes.position>=0&&(n=d)}s?e=l()(s.color()):n&&(e=l()(n.color()))}return m(g(),{href:app.route.discussion(r,a),className:"DiscussionListItem-main"},m("h2",{className:u()("DiscussionListItem-title-edit",e)},h()(r.title(),this.highlightRegExp)),m("ul",{className:u()("DiscussionListItem-info-edit",e)},f()(this.infoItems().toArray())))})),(0,t.extend)(i().prototype,"infoItems",(function(r){var a=null;if(this.attrs.discussion.tags()&&this.attrs.discussion.tags().length>1)for(var o,t=C(this.attrs.discussion.tags());!(o=t()).done;){var e=o.value;if(e.data.attributes.isChild){a=e;break}}if(!r.has("excerpt")){var i=this.attrs.discussion.firstPost();if(i){var n=(0,s.truncate)(i.contentPlain(),175);r.add("excerpt",m("div",null,n),-100)}}r.has("tags")&&r.remove("tags"),a?r.add("tag",m("span",{class:"TagLabel-inner"},m("center",null,m("i",{"aria-hidden":"true",class:"TagLabel-icon "+a.data.attributes.icon+" fa-1x"}),a.data.attributes.name)),-100):r.add("tag",m("span",{class:"TagLabel-inner"}),-100)}))}))})(),module.exports=a})();
//# sourceMappingURL=forum.js.map